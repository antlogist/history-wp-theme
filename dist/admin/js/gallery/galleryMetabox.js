function renderPhotoArchive(e){let t=document.querySelector("#photoArchiveUl");t.innerHTML="",e.map(((e,l)=>{const n=`\n      <li id="photoArchiveLi${l}" aria-label="post-item" class="attachment">\n        <div class="buttons-wrapper">\n          <button data-index="${l}" onclick="deletePhotoArchive(event)" class="button button-small button-delete">x</button>\n        </div>\n        <div class="attachment-preview type-image portrait">\n          <div class="thumbnail">\n            <div class="centered">\n              <img src="${e.mediumUrl}" alt="" draggable="false">\n            </div>\n          </div>\n        </div>\n      </li>\n    `;t.insertAdjacentHTML("afterbegin",n)}))}function deletePhotoArchive(e){e.preventDefault();const t=e.target.dataset.index,l=document.querySelector("#custom_gallery"),n=JSON.parse(l.value);n.splice(t,1),l.value=JSON.stringify(n),renderPhotoArchive(n)}jQuery((function(e){e("body").on("click",".upload_gallery_button",(function(t){t.preventDefault(),gallery_uploader=wp.media({title:"Photo Archives",button:{text:"Use this Images"},multiple:!0,library:{type:["image"]}}).on("select",(function(){const t=gallery_uploader.state().get("selection").toJSON();let l=[];Array.isArray(t)&&t.map((e=>{const t={url:e.url,mediumUrl:e.sizes.medium?e.sizes.medium.url:e.url,title:e.title,description:e.description};l.push(t)}));let n=[];e("#custom_gallery").val()&&(n=JSON.parse(e("#custom_gallery").val()));const i=n.concat(l);e("#custom_gallery").val(JSON.stringify(i)),renderPhotoArchive(i),console.log(t)})).open()}))}));
